<app-message></app-message>

<section class="list-page">
  <div class="list-header">
    <h1>Roles</h1>
  </div>

  <div *ngIf="loading" class="state">Loading...</div>

  <app-generic-table *ngIf="!loading"
    [columns]="columns"
    [data]="data"
    [emptyMessage]="errorMsg || 'No roles found.'"
    [cellTemplates]="{ actions: actionsTpl }">
  </app-generic-table>

  <ng-template #actionsTpl let-row>
    <div class="action-buttons">
      <app-buttons 
          color="danger"
          text="Delete"
          [disabled]="isProtectedRole(row.name)"
          (clicked)="onDelete(row)">
      </app-buttons>
    </div>
  </ng-template>

  <app-confirm-dialog
    [title]="'Delete Role'"
    [message]="'Are you sure you want to delete this role?'"
    [show]="showConfirm"
    (confirmed)="onConfirmDelete($event)">
  </app-confirm-dialog>
</section>